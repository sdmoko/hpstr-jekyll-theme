<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Nginx, Node.JS dan HTTPS dengan Let's Encrypt &#8211; #TukangKreatif</title>
<meta name="description" content="Catatan perjalanan seorang tukang.">
<meta name="keywords" content="Lets Encrypt, Nginx, node.JS, SSL, web">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Nginx, Node.JS dan HTTPS dengan Let's Encrypt">
<meta property="og:description" content="Catatan perjalanan seorang tukang.">
<meta property="og:url" content="/gnu/linux/networking/security/server/nginx-node-js-dan-https-dengan-lets-encrypt/">
<meta property="og:site_name" content="#TukangKreatif">





<link rel="canonical" href="/gnu/linux/networking/security/server/nginx-node-js-dan-https-dengan-lets-encrypt/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="#TukangKreatif Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Syah Dwi Prihatmoko photo" class="author-photo">
					<h4>Syah Dwi Prihatmoko</h4>
					<p>Tukang cari kutu dalam hidupmu, serius!</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:syahdwi92@gmail.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				
				
				
				
				
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/posts/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="/theme-setup/" >Theme Setup</a></li>
	  
	    
	    <li><a href="http://mademistakes.com" target="_blank">External Link</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="/gnu/linux/networking/security/server/nginx-node-js-dan-https-dengan-lets-encrypt/" rel="bookmark" title="Nginx, Node.JS dan HTTPS dengan Let's Encrypt">Nginx, Node.JS dan HTTPS dengan Let's Encrypt</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2016-06-22T11:06:54+07:00">June 22, 2016</time></span></h2>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Jadi sebenernya saya sudah cukup sering untuk membuat sertifikat SSL dengan menggunakan Let's Encrypt, lalu mengkonfigurasikan sertifikat SSL dengan menggunakan Nginx yang berfungsi sebagai Reverse Proxy dari aplikasi yang berbasis Node.JS. Jadi tulisan ini sekaligus sebagai pengingat saya biar gampang nyarinya. Saya ini suka gampang lupa soalnya. :D</p>
<p><strong>Memasang Let's Encrypt</strong></p>
<p>Pada tulisan ini saya menggunakan Debian Jessie sebagai host saya. Aktifkan repositori jessie-backports karena sudah tersedia aplikasi klien untuk Let's Encrypt. Untuk mengaktifkannya bisa dilihat pada halaman <span style="color:#ff0000;"><a style="color:#ff0000;" href="https://backports.debian.org/Instructions/">ini</a></span>.<!--more--></p>
<pre>sudo apt-get install certbot -t jessie-backports</pre>
<p><strong>Membuat sertifikat SSL</strong></p>
<p>Jalankan perintah berikut untuk mendapatkan sertifikat SSL. Pastikan untuk menyesuaikan domain website sesuai dengan yang digunakan. Sebagai catatan, kasus saya saat ini membuat sebuah sertifikat untuk 2 alamat website, karena mempunyai konfigurasi yang sama.</p>
<pre><span class="n">certbot</span> <span class="n">certonly</span> <span class="o">--standalone</span> <span class="o">-</span><span class="n">d</span> <span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">d</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span></pre>
<p>Jika sukses, sertifikat akan berada pada direktori <span style="color:#ff0000;">/etc/letsencrypt/live/example.com</span>.</p>
<p><strong>Konfigurasi Nginx</strong></p>
<p>Konfigurasi berkas untuk domain yang telah di buat tadi. Saya membuat berkas baru, yaitu <span style="color:#ff0000;">/etc/nginx/sites-available/example.com</span>.</p>
<pre>server {

    listen 80;
    server_name example.com www.example.com;

    # redirect all urls to https
    return 301 https://$server_name$request_uri;
}

server {
 
    listen 443 ssl;

    server_name example.com www.example.com;
    # add Strict-Transport-Security to prevent man in the middle attacks
    add_header Strict-Transport-Security "max-age=31536000";

    # ssl certificate config
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;
    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;

    error_log  /var/log/nginx/example-com.error.log;
    access_log /var/log/nginx/example-com.access.log;

    location / {
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_set_header X-NginX-Proxy true;

        proxy_pass http://127.0.0.1:your-port;
        proxy_redirect off;

        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}</pre>
<p>Beberapa catatan tentang konfigurasi di atas:</p>
<ul>
<li>Konfigurasi di atas berfungsi sebagai reverse proxy.</li>
<li>Sesuaikan nama domain dan juga letak berkas sertifikat.</li>
<li>Pastikan mengganti your-port dengan port yang sesuai.</li>
<li>Otomatis melempar request http ke https.</li>
</ul>
<p>Buat <em>symbolic link </em>dari berkas yang dibuat di atas, agar aktif.</p>
<pre>sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/example.com</pre>
<p>Pastikan memuat ulang konfigurasi Nginx.</p>
<pre>sudo systemctl restart nginx.service</pre>
<p>Ujicoba Konfigurasi Nginx + SSL</p>
<p><span style="color:#ff0000;"><a style="color:#ff0000;" href="https://www.ssllabs.com/">SSL Labs</a></span> menyediakan audit untuk SSL secara gratis dan lengkap.</p>
<p>Selanjutnya ngoprek biar webnya lebih aman dan maknyus.</p>
<p>Salam,<br />
Moko yang lagi galau.</p>
<p><strong>Referensi</strong></p>
<p>[0] https://letsencrypt.org/<br />
[1] https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04<br />
[2] https://www.smalldata.tech/blog/nginx-nodejs-and-https-via-letsencrypt</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="/tags/#Lets Encrypt" title="Pages tagged Lets Encrypt" class="tag"><span class="term">Lets Encrypt</span></a><a href="/tags/#Nginx" title="Pages tagged Nginx" class="tag"><span class="term">Nginx</span></a><a href="/tags/#node.JS" title="Pages tagged node.JS" class="tag"><span class="term">node.JS</span></a><a href="/tags/#SSL" title="Pages tagged SSL" class="tag"><span class="term">SSL</span></a><a href="/tags/#web" title="Pages tagged web" class="tag"><span class="term">web</span></a></span>
        
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=/gnu/linux/networking/security/server/nginx-node-js-dan-https-dengan-lets-encrypt/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=/gnu/linux/networking/security/server/nginx-node-js-dan-https-dengan-lets-encrypt/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=/gnu/linux/networking/security/server/nginx-node-js-dan-https-dengan-lets-encrypt/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="/foss/travelling/journey-to-the-west/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="/foss/gnu/linux/server/virtualization/resolving-virt-manager-you-need-to-install-openssh-askpass-or-similar-to-connect-to-this-host/" title="Resolving virt-manager “You need to install openssh-askpass or similar to connect to this host”">Resolving virt-manager “You need to install openssh-askpass or similar to connect to this host”</a></h3>
      <p>Jadi, saya punya problem dengan virt-manager, yaitu ketika ingin terkoneksi dengan KVM server yang ada di awan. Ketika ingin terkoneksi, ...&hellip; <a href="/foss/gnu/linux/server/virtualization/resolving-virt-manager-you-need-to-install-openssh-askpass-or-similar-to-connect-to-this-host/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="/foss/travelling/journey-to-the-west/" title="Journey to the West">Journey to the West</a></h4>
        <span>Published on May 10, 2016</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="/gnu/linux/networking/install-dnscrypt-di-debian-jessie/" title="Install DNSCrypt di Debian Jessie">Install DNSCrypt di Debian Jessie</a></h4>
        <span>Published on July 14, 2015</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Syah Dwi Prihatmoko. Made with <i class="fa fa-heart" aria-hidden="true" style="color:#DD3D36"></i> powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>, hosted by <a href="https://github.io">Github</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>



	        

</body>
</html>
